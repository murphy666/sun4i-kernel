/***************************************************************************
 *
 * This is an AUTOGENERATED file from genio_pack_interface_c.pl
 *
 *    CONFIDENTIAL
 *    Copyright (C) Cambridge Silicon Radio Ltd 2007. All rights reserved.
 */

/***************************************************************************
 * Description:
 *       The following functions are used to convert primitives, commands or
 *       in a packed stream of bytes and send it to a choosen destination.
 *
 * Options used to generate this file:
 * perl genio_sap_serialise.pl
 *       -o /home/bfsw/host/releases/unifi_hostsoftware_212/build/unifi-driver-212/host/unifi_helper/unifi_sme/../common/saps_impl/pal_hci_sap/ipc/pal_hci_sap_serialise.c
 *       -x ../../common/hciio/../amp_hci/bt_amp_hci.xml
 *       -d up
 *       -c Event_Code
 *       -i PAL_HCI
 *       -h HCI_Event_Header
 *
 ***************************************************************************/
#include "fsm/csr_wifi_fsm.h" 
#include "sme_trace/sme_trace.h"
#include "sme_trace/sme_pbc.h"
#include "pal_hci_sap/pal_hci_sap_types.h" 
#include "pal_hci_sap/pal_hci_sap_signals.h" 
#include "event_pack_unpack/event_pack_unpack.h"
#include "pal_hci_sap/pal_hci_sap_types_trace.h"
#include "pal_hci_sap/pal_hci_sap_signals_trace.h" 

#define PAL_HCI_GENERIC_HEADER_SIZE (2)
CsrUint16 serialise_hci_command_complete_evt(CsrUint8** resultBuffer, CsrUint8 numHciCommandPackets, const ReturnParameters* returnParameters)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciCommandCompleteEvtParam("", numHciCommandPackets, returnParameters);

    packedSize += 1; /* numHciCommandPackets */
    packedSize += 2; /* returnParameters->.commandCode */
    /* -----------------------------------------------------------------*/
    /* A UNION  :: Hci_Return_Param*/
    /* -----------------------------------------------------------------*/
    switch(returnParameters->commandCode)
    {
    case HCI_AMP_TEST_END_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.ampTestEndStatus */
        break;
    case HCI_ENABLE_AMP_RECEIVER_REPORTS_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.enableAMPReceiverReportsStatus */
        break;
    case HCI_ENABLE_AMP_TEST_MODE_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.testModeStatus */
        break;
    case HCI_FLUSH_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.flushReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.flushReturn.handle */
        break;
    case HCI_LOGICAL_LINK_CANCEL_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.logicalLinkCancelReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.logicalLinkCancelReturn.physicalLinkHandle */
        packedSize += 1; /* returnParameters->hciReturnParam.logicalLinkCancelReturn.txFlowSpecId */
        break;
    case HCI_NO_OPERATION_CODE:
        packedSize += 0; /* returnParameters->.hciReturnParam.noOperation */
        break;
    case HCI_READ_BEST_EFFORT_FLUSH_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readBEFlushTimeoutReturn.status */
        packedSize += 4; /* returnParameters->hciReturnParam.readBEFlushTimeoutReturn.bestEffortFlushTimeout */
        break;
    case HCI_READ_CONNECTION_ACCEPT_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readConnectionAcceptTimeout.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readConnectionAcceptTimeout.connAcceptTimeout */
        break;
    case HCI_READ_DATA_BLOCK_SIZE_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readDataBlockSizeReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readDataBlockSizeReturn.maxAclDataPacketLength */
        packedSize += 2; /* returnParameters->hciReturnParam.readDataBlockSizeReturn.dataBlockLength */
        packedSize += 2; /* returnParameters->hciReturnParam.readDataBlockSizeReturn.totalNumberOfBlocks */
        break;
    case HCI_READ_FAILED_CONTACT_COUNTER_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readFailedContactCounterReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readFailedContactCounterReturn.handle */
        packedSize += 2; /* returnParameters->hciReturnParam.readFailedContactCounterReturn.failedContactCounter */
        break;
    case HCI_READ_LINK_QUALITY_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLinkQualityReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readLinkQualityReturn.handle */
        packedSize += 1; /* returnParameters->hciReturnParam.readLinkQualityReturn.linkQuality */
        break;
    case HCI_READ_LINK_SUPERVISION_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readTimeoutReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readTimeoutReturn.handle */
        packedSize += 2; /* returnParameters->hciReturnParam.readTimeoutReturn.linkSupervisionTimeout */
        break;
    case HCI_READ_LOCAL_AMP_ASSOC_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalAmpAssocReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalAmpAssocReturn.physicalLinkHandle */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalAmpAssocReturn.remainingLength */
        packedSize += 1*returnParameters->hciReturnParam.readLocalAmpAssocReturn.assocFragment.dataLen; /* returnParameters???->hciReturnParam.readLocalAmpAssocReturn.assocFragment.data */
        break;
    case HCI_READ_LOCAL_AMP_INFO_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.ampStatus */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.totalBandwidth */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxGuaranteedBandwidth */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.minLatency */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxPduSize */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.controllerType */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.palCapabilities */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.ampAssocLength */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxFlushTimeout */
        packedSize += 4; /* returnParameters->hciReturnParam.readLocalAmpInfoReturn.bestEffortFlushTimeout */
        break;
    case HCI_READ_LOCAL_SUPPORTED_COMMANDS_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalSupportedCommandsReturn.status */
        packedSize += 64; /* returnParameters->hciReturnParam.readLocalSupportedCommandsReturn.supportedCommands.m */
        break;
    case HCI_READ_LOCAL_VERSION_INFORMATION_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.hciVersion */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.hciRevision */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.palVersion */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.manufacturerName */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocalVersionInformationReturn.palSubversion */
        break;
    case HCI_READ_LOCATION_DATA_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLocationDataReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocationDataReturn.locationDomainAware */
        packedSize += 2; /* returnParameters->hciReturnParam.readLocationDataReturn.locationDomain */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocationDataReturn.locationDomainOptions */
        packedSize += 1; /* returnParameters->hciReturnParam.readLocationDataReturn.locationOptions */
        break;
    case HCI_READ_LOGICAL_LINK_ACCEPT_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLogicalLinkAcceptTimeout.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readLogicalLinkAcceptTimeout.logicalLinkAcceptTimeout */
        break;
    case HCI_READ_LOOPBACK_MODE_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readLoopbackReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.readLoopbackReturn.loopbackMode */
        break;
    case HCI_READ_RSSI_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.readRSSIReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.readRSSIReturn.handle */
        packedSize += 1; /* returnParameters->hciReturnParam.readRSSIReturn.rSSI */
        break;
    case HCI_RESET_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.resetStatus */
        break;
    case HCI_RESET_FAILED_CONTACT_COUNTER_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.resetFailedContactCounterReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.resetFailedContactCounterReturn.handle */
        break;
    case HCI_SET_EVENT_MASK_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.setEventMaskStatus */
        break;
    case HCI_SET_EVENT_MASK_PAGE2_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.setEventMaskPage2Status */
        break;
    case HCI_WRITE_BEST_EFFORT_FLUSH_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.writeBEFlushTimeoutReturn */
        break;
    case HCI_WRITE_CONNECTION_ACCEPT_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.writeConnectionAcceptTimeoutStatus */
        break;
    case HCI_WRITE_LINK_SUPERVISION_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.writeTimeoutReturn.status */
        packedSize += 2; /* returnParameters->hciReturnParam.writeTimeoutReturn.handle */
        break;
    case HCI_WRITE_LOCATION_DATA_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.writeLocationDataStatus */
        break;
    case HCI_WRITE_LOGICAL_LINK_ACCEPT_TIMEOUT_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.writeLogicalLinkAcceptTimeout */
        break;
    case HCI_WRITE_LOOPBACK_MODE_CODE:
        packedSize += 1; /* returnParameters->.hciReturnParam.writeLoopbackStatus */
        break;
    case HCI_WRITE_REMOTE_AMP_ASSOC_CODE:
        packedSize += 1; /* returnParameters->hciReturnParam.writeRemoteAmpAssocReturn.status */
        packedSize += 1; /* returnParameters->hciReturnParam.writeRemoteAmpAssocReturn.physicalLinkHandle */
        break;
    default:
        break;
    }
    /* -----------------------------------------------------------------*/
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_COMMAND_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(numHciCommandPackets)); /* Num_HCI_Command_Packets */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->commandCode)); /* Command_Code */
    /* -----------------------------------------------------------------*/
    /* B UNION  :: Hci_Return_Param */
    /* -----------------------------------------------------------------*/
    switch(returnParameters->commandCode)
    {
    case HCI_AMP_TEST_END_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.ampTestEndStatus); /* HCI_AMP_TEST_END_CODE */
        break;
    case HCI_ENABLE_AMP_RECEIVER_REPORTS_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.enableAMPReceiverReportsStatus); /* HCI_ENABLE_AMP_RECEIVER_REPORTS_CODE */
        break;
    case HCI_ENABLE_AMP_TEST_MODE_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.testModeStatus); /* HCI_ENABLE_AMP_TEST_MODE_CODE */
        break;
    case HCI_FLUSH_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.flushReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.flushReturn.handle)); /* Handle */
        break;
    case HCI_LOGICAL_LINK_CANCEL_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.logicalLinkCancelReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.logicalLinkCancelReturn.physicalLinkHandle)); /* Physical_Link_Handle */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.logicalLinkCancelReturn.txFlowSpecId)); /* Tx_Flow_Spec_ID */
        break;
    case HCI_NO_OPERATION_CODE:
            break;
    case HCI_READ_BEST_EFFORT_FLUSH_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readBEFlushTimeoutReturn.status)); /* Status */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readBEFlushTimeoutReturn.bestEffortFlushTimeout)); /* Best_Effort_Flush_Timeout */
        break;
    case HCI_READ_CONNECTION_ACCEPT_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readConnectionAcceptTimeout.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readConnectionAcceptTimeout.connAcceptTimeout)); /* Conn_Accept_Timeout */
        break;
    case HCI_READ_DATA_BLOCK_SIZE_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readDataBlockSizeReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readDataBlockSizeReturn.maxAclDataPacketLength)); /* Max_ACL_Data_Packet_Length */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readDataBlockSizeReturn.dataBlockLength)); /* Data_Block_Length */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readDataBlockSizeReturn.totalNumberOfBlocks)); /* Total_Number_Of_Blocks */
        break;
    case HCI_READ_FAILED_CONTACT_COUNTER_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readFailedContactCounterReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readFailedContactCounterReturn.handle)); /* Handle */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readFailedContactCounterReturn.failedContactCounter)); /* Failed_Contact_Counter */
        break;
    case HCI_READ_LINK_QUALITY_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLinkQualityReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLinkQualityReturn.handle)); /* Handle */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLinkQualityReturn.linkQuality)); /* Link_Quality */
        break;
    case HCI_READ_LINK_SUPERVISION_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readTimeoutReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readTimeoutReturn.handle)); /* Handle */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readTimeoutReturn.linkSupervisionTimeout)); /* Link_Supervision_Timeout */
        break;
    case HCI_READ_LOCAL_AMP_ASSOC_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalAmpAssocReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalAmpAssocReturn.physicalLinkHandle)); /* Physical_Link_Handle */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalAmpAssocReturn.remainingLength)); /* Remaining_Length */
        if ((1*returnParameters->hciReturnParam.readLocalAmpAssocReturn.assocFragment.dataLen) > 0)
        {
            packedLength += event_pack_buffer(&buffer, (CsrUint8*)returnParameters->hciReturnParam.readLocalAmpAssocReturn.assocFragment.data, 1*returnParameters->hciReturnParam.readLocalAmpAssocReturn.assocFragment.dataLen); /*lint !e545 !e725    Data */
            CsrPfree(returnParameters->hciReturnParam.readLocalAmpAssocReturn.assocFragment.data);
        }
        break;
    case HCI_READ_LOCAL_AMP_INFO_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.ampStatus)); /* Amp_Status */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.totalBandwidth)); /* Total_Bandwidth */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxGuaranteedBandwidth)); /* Max_Guaranteed_Bandwidth */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.minLatency)); /* Min_Latency */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxPduSize)); /* Max_PDU_Size */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.controllerType)); /* Controller_Type */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.palCapabilities)); /* PAL_Capabilities */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.ampAssocLength)); /* AMP_ASSOC_Length */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.maxFlushTimeout)); /* Max_Flush_Timeout */
        packedLength += event_pack_CsrUint32(&buffer, (CsrUint32)(returnParameters->hciReturnParam.readLocalAmpInfoReturn.bestEffortFlushTimeout)); /* Best_Effort_Flush_Timeout */
        break;
    case HCI_READ_LOCAL_SUPPORTED_COMMANDS_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalSupportedCommandsReturn.status)); /* Status */
        packedLength += event_pack_buffer(&buffer, (CsrUint8*)returnParameters->hciReturnParam.readLocalSupportedCommandsReturn.supportedCommands.m, 64); /*lint !e545 !e725    M */
        break;
    case HCI_READ_LOCAL_VERSION_INFORMATION_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.hciVersion)); /* HCI_Version */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.hciRevision)); /* HCI_Revision */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.palVersion)); /* PAL_Version */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.manufacturerName)); /* Manufacturer_Name */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocalVersionInformationReturn.palSubversion)); /* PAL_Subversion */
        break;
    case HCI_READ_LOCATION_DATA_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocationDataReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocationDataReturn.locationDomainAware)); /* Location_Domain_Aware */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLocationDataReturn.locationDomain)); /* Location_Domain */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocationDataReturn.locationDomainOptions)); /* Location_Domain_Options */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLocationDataReturn.locationOptions)); /* Location_Options */
        break;
    case HCI_READ_LOGICAL_LINK_ACCEPT_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLogicalLinkAcceptTimeout.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readLogicalLinkAcceptTimeout.logicalLinkAcceptTimeout)); /* Logical_Link_Accept_Timeout */
        break;
    case HCI_READ_LOOPBACK_MODE_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLoopbackReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readLoopbackReturn.loopbackMode)); /* Loopback_Mode */
        break;
    case HCI_READ_RSSI_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readRSSIReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.readRSSIReturn.handle)); /* Handle */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.readRSSIReturn.rSSI)); /* RSSI */
        break;
    case HCI_RESET_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.resetStatus); /* HCI_RESET_CODE */
        break;
    case HCI_RESET_FAILED_CONTACT_COUNTER_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.resetFailedContactCounterReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.resetFailedContactCounterReturn.handle)); /* Handle */
        break;
    case HCI_SET_EVENT_MASK_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.setEventMaskStatus); /* HCI_SET_EVENT_MASK_CODE */
        break;
    case HCI_SET_EVENT_MASK_PAGE2_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.setEventMaskPage2Status); /* HCI_SET_EVENT_MASK_PAGE2_CODE */
        break;
    case HCI_WRITE_BEST_EFFORT_FLUSH_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.writeBEFlushTimeoutReturn); /* HCI_WRITE_BEST_EFFORT_FLUSH_TIMEOUT_CODE */
        break;
    case HCI_WRITE_CONNECTION_ACCEPT_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.writeConnectionAcceptTimeoutStatus); /* HCI_WRITE_CONNECTION_ACCEPT_TIMEOUT_CODE */
        break;
    case HCI_WRITE_LINK_SUPERVISION_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.writeTimeoutReturn.status)); /* Status */
        packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(returnParameters->hciReturnParam.writeTimeoutReturn.handle)); /* Handle */
        break;
    case HCI_WRITE_LOCATION_DATA_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.writeLocationDataStatus); /* HCI_WRITE_LOCATION_DATA_CODE */
        break;
    case HCI_WRITE_LOGICAL_LINK_ACCEPT_TIMEOUT_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.writeLogicalLinkAcceptTimeout); /* HCI_WRITE_LOGICAL_LINK_ACCEPT_TIMEOUT_CODE */
        break;
    case HCI_WRITE_LOOPBACK_MODE_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)returnParameters->hciReturnParam.writeLoopbackStatus); /* HCI_WRITE_LOOPBACK_MODE_CODE */
        break;
    case HCI_WRITE_REMOTE_AMP_ASSOC_CODE:
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.writeRemoteAmpAssocReturn.status)); /* Status */
        packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(returnParameters->hciReturnParam.writeRemoteAmpAssocReturn.physicalLinkHandle)); /* Physical_Link_Handle */
        break;
    default:
        break;
    }
    /* -----------------------------------------------------------------*/
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_command_status_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint8 numHciCommandPackets, HciOpcode commandOpcode)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciCommandStatusEvtParam("", status, numHciCommandPackets, commandOpcode);

    packedSize += 1; /* status */
    packedSize += 1; /* numHciCommandPackets */
    packedSize += 2; /* commandOpcode */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_COMMAND_STATUS_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(numHciCommandPackets)); /* Num_HCI_Command_Packets */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(commandOpcode)); /* Command_Opcode */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_hardware_error_evt(CsrUint8** resultBuffer, CsrUint8 hardwareCode)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciHardwareErrorEvtParam("", hardwareCode);

    packedSize += 1; /* hardwareCode */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_HARDWARE_ERROR_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(hardwareCode)); /* Hardware_Code */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_flush_occurred_evt(CsrUint8** resultBuffer, CsrUint16 handle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciFlushOccurredEvtParam("", handle);

    packedSize += 2; /* handle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_FLUSH_OCCURRED_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(handle)); /* Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_loopback_command_evt(CsrUint8** resultBuffer, HciCommandPacket hciCommandPacket)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciLoopbackCommandEvtParam("");

    packedSize += 1*hciCommandPacket.dataLen; /* hciCommandPacket???.data */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_LOOPBACK_COMMAND_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    if ((1*hciCommandPacket.dataLen) > 0)
    {
        packedLength += event_pack_buffer(&buffer, (CsrUint8*)hciCommandPacket.data, 1*hciCommandPacket.dataLen); /*lint !e545 !e725    data */
        CsrPfree(hciCommandPacket.data);
    }
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_data_buffer_overflow_evt(CsrUint8** resultBuffer, HciLinkType linkType)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciDataBufferOverflowEvtParam("", linkType);

    packedSize += 1; /* linkType */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_DATA_BUFFER_OVERFLOW_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(linkType)); /* Link_Type */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_qos_violation_evt(CsrUint8** resultBuffer, CsrUint16 handle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciQosViolationEvtParam("", handle);

    packedSize += 2; /* handle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_QOS_VIOLATION_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(handle)); /* Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_enhanced_flush_complete_evt(CsrUint8** resultBuffer, CsrUint16 handle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciEnhancedFlushCompleteEvtParam("", handle);

    packedSize += 2; /* handle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_ENHANCED_FLUSH_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(handle)); /* Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_physical_link_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint8 physicalLinkHandle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciPhysicalLinkCompleteEvtParam("", status, physicalLinkHandle);

    packedSize += 1; /* status */
    packedSize += 1; /* physicalLinkHandle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_PHYSICAL_LINK_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_channel_select_evt(CsrUint8** resultBuffer, CsrUint8 physicalLinkHandle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciChannelSelectEvtParam("", physicalLinkHandle);

    packedSize += 1; /* physicalLinkHandle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_CHANNEL_SELECT_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_disconnect_physical_link_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint8 physicalLinkHandle, CsrUint8 reason)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciDisconnectPhysicalLinkCompleteEvtParam("", status, physicalLinkHandle, reason);

    packedSize += 1; /* status */
    packedSize += 1; /* physicalLinkHandle */
    packedSize += 1; /* reason */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_DISCONNECT_PHYSICAL_LINK_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(reason)); /* Reason */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_physical_link_loss_early_warning_evt(CsrUint8** resultBuffer, CsrUint8 physicalLinkHandle, LinkLossReasonCode linkLossReason)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciPhysicalLinkLossEarlyWarningEvtParam("", physicalLinkHandle, linkLossReason);

    packedSize += 1; /* physicalLinkHandle */
    packedSize += 1; /* linkLossReason */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_PHYSICAL_LINK_LOSS_EARLY_WARNING_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(linkLossReason)); /* Link_Loss_Reason */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_physical_link_recovery_evt(CsrUint8** resultBuffer, CsrUint8 physicalLinkHandle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciPhysicalLinkRecoveryEvtParam("", physicalLinkHandle);

    packedSize += 1; /* physicalLinkHandle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_PHYSICAL_LINK_RECOVERY_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_logical_link_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint16 logicalLinkHandle, CsrUint8 physicalLinkHandle, CsrUint8 txFlowSpecId)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciLogicalLinkCompleteEvtParam("", status, logicalLinkHandle, physicalLinkHandle, txFlowSpecId);

    packedSize += 1; /* status */
    packedSize += 2; /* logicalLinkHandle */
    packedSize += 1; /* physicalLinkHandle */
    packedSize += 1; /* txFlowSpecId */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_LOGICAL_LINK_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(logicalLinkHandle)); /* Logical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(txFlowSpecId)); /* TX_Flow_Spec_ID */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_disconnect_logical_link_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint16 logicalLinkHandle, CsrUint8 reason)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciDisconnectLogicalLinkCompleteEvtParam("", status, logicalLinkHandle, reason);

    packedSize += 1; /* status */
    packedSize += 2; /* logicalLinkHandle */
    packedSize += 1; /* reason */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_DISCONNECT_LOGICAL_LINK_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(logicalLinkHandle)); /* Logical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(reason)); /* Reason */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_flow_spec_modify_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint16 handle)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciFlowSpecModifyCompleteEvtParam("", status, handle);

    packedSize += 1; /* status */
    packedSize += 2; /* handle */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_FLOW_SPEC_MODIFY_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(handle)); /* Handle */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_number_of_completed_data_blocks_evt(CsrUint8** resultBuffer, CsrUint16 totalNumDataBlocks, CsrUint8 numberOfHandles, CsrUint16 handle, CsrUint16 numberOfCompletedPackets, CsrUint16 numberOfCompletedBlocks)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciNumberOfCompletedDataBlocksEvtParam("", totalNumDataBlocks, numberOfHandles, handle, numberOfCompletedPackets, numberOfCompletedBlocks);

    packedSize += 2; /* totalNumDataBlocks */
    packedSize += 1; /* numberOfHandles */
    packedSize += 2; /* handle */
    packedSize += 2; /* numberOfCompletedPackets */
    packedSize += 2; /* numberOfCompletedBlocks */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_NUMBER_OF_COMPLETED_DATA_BLOCKS_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(totalNumDataBlocks)); /* Total_Num_Data_Blocks */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(numberOfHandles)); /* Number_Of_Handles */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(handle)); /* Handle */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(numberOfCompletedPackets)); /* Number_Of_Completed_Packets */
    packedLength += event_pack_CsrUint16(&buffer, (CsrUint16)(numberOfCompletedBlocks)); /* Number_Of_Completed_Blocks */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_short_range_mode_change_complete_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint8 physicalLinkHandle, ShortRangeMode shortRangeModeState)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciShortRangeModeChangeCompleteEvtParam("", status, physicalLinkHandle, shortRangeModeState);

    packedSize += 1; /* status */
    packedSize += 1; /* physicalLinkHandle */
    packedSize += 1; /* shortRangeModeState */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_SHORT_RANGE_MODE_CHANGE_COMPLETE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(physicalLinkHandle)); /* Physical_Link_Handle */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(shortRangeModeState)); /* Short_Range_Mode_State */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_amp_status_change_evt(CsrUint8** resultBuffer, HciStatusCode status, AmpStatus ampStatus)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciAmpStatusChangeEvtParam("", status, ampStatus);

    packedSize += 1; /* status */
    packedSize += 1; /* ampStatus */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_AMP_STATUS_CHANGE_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(ampStatus)); /* AMP_Status */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_hci_generic_amp_link_key_nt(CsrUint8** resultBuffer, const BdAddr* bdAddr, const GenericAmpLinkKey* genericAmpLinkKey, LinkKeyType keyType)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_HciGenericAmpLinkKeyNtParam("", keyType);

    packedSize += 6; /* bdAddr->.a */
    packedSize += 32; /* genericAmpLinkKey->.k */
    packedSize += 1; /* keyType */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(HCI_GENERIC_AMP_LINK_KEY_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_buffer(&buffer, (CsrUint8*)bdAddr->a, 6); /*lint !e545 !e725    a */
    packedLength += event_pack_buffer(&buffer, (CsrUint8*)genericAmpLinkKey->k, 32); /*lint !e545 !e725    k */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(keyType)); /* Key_Type */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_amp_transmit_power_evt(CsrUint8** resultBuffer, HciStatusCode status, PowerLevel powerLevel)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_AmpTransmitPowerEvtParam("", status, powerLevel);

    packedSize += 1; /* status */
    packedSize += 1; /* powerLevel */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(AMP_TRANSMIT_POWER_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(powerLevel)); /* Power_Level */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_amp_receiver_report_evt(CsrUint8** resultBuffer, CsrUint8 ampReport)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_AmpReceiverReportEvtParam("", ampReport);

    packedSize += 1; /* ampReport */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(AMP_RECEIVER_REPORT_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(ampReport)); /* AMP_REPORT */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_amp_start_transmitter_test_evt(CsrUint8** resultBuffer, HciStatusCode status, CsrUint8 powerLevel)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_AmpStartTransmitterTestEvtParam("", status, powerLevel);

    packedSize += 1; /* status */
    packedSize += 1; /* powerLevel */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(AMP_START_TRANSMITTER_TEST_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(powerLevel)); /* Power_Level */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

CsrUint16 serialise_amp_start_receiver_test_evt(CsrUint8** resultBuffer, HciStatusCode status)
{
    CsrUint16 packedLength = 0;
    CsrUint16 packedSize = PAL_HCI_GENERIC_HEADER_SIZE;
    CsrUint8* evt;
    CsrUint8* buffer;

    trace_AmpStartReceiverTestEvtParam("", status);

    packedSize += 1; /* status */
    evt = (CsrUint8*)CsrPmalloc(packedSize);
    buffer = evt;

    /* Packing HciEventHeader generic header */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(AMP_START_RECEIVER_TEST_CODE)); /* Event_Code */
    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(packedSize-PAL_HCI_GENERIC_HEADER_SIZE)); /* Length */
    /* Generic header packed */

    packedLength += event_pack_CsrUint8(&buffer, (CsrUint8)(status)); /* Status */
    verify(TR_IPC, packedLength == packedSize);

    *resultBuffer = evt;
    return packedLength;
}

